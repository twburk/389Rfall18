Writeup 3 - Pentesting I
======

Name: *Travis Burk*
Section: *0201*

I pledge on my honor that I havie not given or received any unauthorized assistance on this assignment or examination.

Digital acknowledgement of honor pledge: *Travis Burk*

## Assignment 4 Writeup

### Part 1 (45 pts)
*After doing the correct test and research I found that the correct flag is “CMSC389R-{p1ng_as_a_$erv1c3}”. I was able to get this flag by running the “nc cornerstoneairlines.co 45” command in the terminal and then passing in a generic website IP address (umd.edu) followed by a semicolon, cd home, cat flag.txt (umd.edu;cd home;cat flag.txt). I was able to find the flag.txt file by running the “nc” command numerous times and each time “cd” into a different directory and listing the files and directories of the new directory by the “ls” command (umd.edu;cd home;ls). By “cd” to all the directories on the corner stone airlines server I found the flag.txt file in the home directory. After finding the file a simple “cat” command of the text file provided me with the flag. My advice to Fred would be that his current set up is perfectly fine, but he would have to take some better precautions. In most cases the ping command is not secure at all on the server. This allows the attacker to break out of the ping command and start passing in his or her own commands, which could be used to exploit the server. One of my two options for Fred would be to disable user input in general. The attacker then will not have an option to exploit this system. This will be the safest way as it will be no way for command injections to get into the server. My second option for Fred would be to have a whitelist of possible inputs. By having this whitelist it will check for special characters inside the users input. If it finds a character that is on the whitelist it will not execute the users input. However, a drawback of this could be that the attacker finds a character that is not listed within the whitelist and his attack will be executed.*

### Part 2 (55 pts)
*For implementing the stub code, to organize a plan. For starters I needed a way to constantly ask the user/attacker for input using the raw_input method in python, and a while loop. The while loop will allow the script to keep asking for a new command from the user until the user enters “quit”. From there the user has 3 other options to enter. If the user enters “help” the script will print the usage function, which prints the different commands a user can enter. Additionally, if the user enters anything other than the 4 basic commands the usage function will also be printed. The next command a user can enter is “shell”. This will bring the user into a replica of the corner stone airlines “terminal”. From here a new variable will be created called “directory” which will start of being set to “/” which represents the starting directory of the Cornerstone airlines terminal. We will use another raw_input method and while loop within this command. The raw_input with ask the user for another command by printing the variable directory followed by “>”, to represent the shell. The while loop will keep executing the raw_input until the user enters “exit”, which then will take the user back to previous terminal. Before the user enters “exit” however, he or she can run real terminal commands on the cornerstone airlines server. I implemented a function called “execute_cmd(cmd)”, which will connect to the cornerstone airlines server using socket, and send/receive data. Each time data is received it will return it back to the user. Each time the “execute_cmd” function is called,a new connection is created, which resulted in me having to use time.sleep to bypass the banner. If the user “cd” to a new directory I tack on an additional command “pwd”. This allows for the “execute_cmd” function to return the current directory, which will be saved in the directory variable. Any other shell commands will print the results in the user’s terminal. Finally, the last command a user can call is the “pull” command. This command will be split into an array of size 3. The first element being “pull”, the second element being the path to the source file, and the third being the path to the destination file. I then create a string variable called command initializing it to “cd “. Next, I split the second element of the array by “/”, this will return another array that will have each directory as an element, and the last element will be the file. I concatenate each director to the command variable adding a “/” in between each directory. Once every directory is placed in the command variable, ill tac on an additional command “;cat” followed by the file. Once the command is fully initialized I will call the “execut_cmd” function passing in the command, the results will be saved in a temp variable. This will allow the containments of the text file to be saved in that temp variable. Finally, using File I/O I will open a new file to write in passing in the third element of the array (the destination path of the file). Once the file is open, I will write the temp variable inside the file. This will replicate a simple pull from the corner stone airlines server to a path to the user local machine.*
